{"ast":null,"code":"var _jsxFileName = \"E:\\\\CMS tue\\\\CMS\\\\frontend\\\\src\\\\components\\\\agreements\\\\ConsentForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport api from '../../api/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ConsentForm({\n  onConsentGiven\n}) {\n  _s();\n  const [consent, setConsent] = useState(null);\n  const [status, setStatus] = useState('granted');\n  const [message, setMessage] = useState('');\n  useEffect(() => {\n    api.get('/agreements?consentType=marketing').then(res => setConsent(res.data[0])).catch(() => setConsent(null));\n  }, []);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setMessage('');\n    try {\n      const res = await api.post('/agreements', {\n        consentType: 'marketing',\n        status,\n        validUntil: new Date(Date.now() + 365 * 24 * 60 * 60 * 1000) // 1 year\n      });\n      setConsent(res.data);\n      setMessage('Consent updated!');\n      if (onConsentGiven) onConsentGiven(res.data);\n    } catch {\n      setMessage('Failed to update consent');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Consent for Marketing\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"radio\",\n        value: \"granted\",\n        checked: status === 'granted',\n        onChange: () => setStatus('granted')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this), \"Grant Consent\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"radio\",\n        value: \"withdrawn\",\n        checked: status === 'withdrawn',\n        onChange: () => setStatus('withdrawn')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this), \"Withdraw Consent\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      children: \"Submit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), consent && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Current status: \", consent.status]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 19\n    }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 5\n  }, this);\n}\n_s(ConsentForm, \"DaLO1IOp7H7hGX9PdNeNRVAKOLY=\");\n_c = ConsentForm;\nexport default ConsentForm;\nvar _c;\n$RefreshReg$(_c, \"ConsentForm\");","map":{"version":3,"names":["React","useState","useEffect","api","jsxDEV","_jsxDEV","ConsentForm","onConsentGiven","_s","consent","setConsent","status","setStatus","message","setMessage","get","then","res","data","catch","handleSubmit","e","preventDefault","post","consentType","validUntil","Date","now","onSubmit","children","fileName","_jsxFileName","lineNumber","columnNumber","type","value","checked","onChange","_c","$RefreshReg$"],"sources":["E:/CMS tue/CMS/frontend/src/components/agreements/ConsentForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport api from '../../api/api';\r\n\r\nfunction ConsentForm({ onConsentGiven }) {\r\n  const [consent, setConsent] = useState(null);\r\n  const [status, setStatus] = useState('granted');\r\n  const [message, setMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    api.get('/agreements?consentType=marketing')\r\n      .then(res => setConsent(res.data[0]))\r\n      .catch(() => setConsent(null));\r\n  }, []);\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    setMessage('');\r\n    try {\r\n      const res = await api.post('/agreements', {\r\n        consentType: 'marketing',\r\n        status,\r\n        validUntil: new Date(Date.now() + 365*24*60*60*1000) // 1 year\r\n      });\r\n      setConsent(res.data);\r\n      setMessage('Consent updated!');\r\n      if (onConsentGiven) onConsentGiven(res.data);\r\n    } catch {\r\n      setMessage('Failed to update consent');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <h2>Consent for Marketing</h2>\r\n      <label>\r\n        <input type=\"radio\" value=\"granted\" checked={status === 'granted'} onChange={() => setStatus('granted')} />\r\n        Grant Consent\r\n      </label>\r\n      <label>\r\n        <input type=\"radio\" value=\"withdrawn\" checked={status === 'withdrawn'} onChange={() => setStatus('withdrawn')} />\r\n        Withdraw Consent\r\n      </label>\r\n      <button type=\"submit\">Submit</button>\r\n      {consent && <div>Current status: {consent.status}</div>}\r\n      {message && <div>{message}</div>}\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default ConsentForm;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,GAAG,MAAM,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhC,SAASC,WAAWA,CAAC;EAAEC;AAAe,CAAC,EAAE;EAAAC,EAAA;EACvC,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACU,MAAM,EAAEC,SAAS,CAAC,GAAGX,QAAQ,CAAC,SAAS,CAAC;EAC/C,MAAM,CAACY,OAAO,EAAEC,UAAU,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EAE1CC,SAAS,CAAC,MAAM;IACdC,GAAG,CAACY,GAAG,CAAC,mCAAmC,CAAC,CACzCC,IAAI,CAACC,GAAG,IAAIP,UAAU,CAACO,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CACpCC,KAAK,CAAC,MAAMT,UAAU,CAAC,IAAI,CAAC,CAAC;EAClC,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMU,YAAY,GAAG,MAAMC,CAAC,IAAI;IAC9BA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClBR,UAAU,CAAC,EAAE,CAAC;IACd,IAAI;MACF,MAAMG,GAAG,GAAG,MAAMd,GAAG,CAACoB,IAAI,CAAC,aAAa,EAAE;QACxCC,WAAW,EAAE,WAAW;QACxBb,MAAM;QACNc,UAAU,EAAE,IAAIC,IAAI,CAACA,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,GAAG,GAAC,EAAE,GAAC,EAAE,GAAC,EAAE,GAAC,IAAI,CAAC,CAAC;MACvD,CAAC,CAAC;MACFjB,UAAU,CAACO,GAAG,CAACC,IAAI,CAAC;MACpBJ,UAAU,CAAC,kBAAkB,CAAC;MAC9B,IAAIP,cAAc,EAAEA,cAAc,CAACU,GAAG,CAACC,IAAI,CAAC;IAC9C,CAAC,CAAC,MAAM;MACNJ,UAAU,CAAC,0BAA0B,CAAC;IACxC;EACF,CAAC;EAED,oBACET,OAAA;IAAMuB,QAAQ,EAAER,YAAa;IAAAS,QAAA,gBAC3BxB,OAAA;MAAAwB,QAAA,EAAI;IAAqB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAC9B5B,OAAA;MAAAwB,QAAA,gBACExB,OAAA;QAAO6B,IAAI,EAAC,OAAO;QAACC,KAAK,EAAC,SAAS;QAACC,OAAO,EAAEzB,MAAM,KAAK,SAAU;QAAC0B,QAAQ,EAAEA,CAAA,KAAMzB,SAAS,CAAC,SAAS;MAAE;QAAAkB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,iBAE7G;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAO,CAAC,eACR5B,OAAA;MAAAwB,QAAA,gBACExB,OAAA;QAAO6B,IAAI,EAAC,OAAO;QAACC,KAAK,EAAC,WAAW;QAACC,OAAO,EAAEzB,MAAM,KAAK,WAAY;QAAC0B,QAAQ,EAAEA,CAAA,KAAMzB,SAAS,CAAC,WAAW;MAAE;QAAAkB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,oBAEnH;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAO,CAAC,eACR5B,OAAA;MAAQ6B,IAAI,EAAC,QAAQ;MAAAL,QAAA,EAAC;IAAM;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,EACpCxB,OAAO,iBAAIJ,OAAA;MAAAwB,QAAA,GAAK,kBAAgB,EAACpB,OAAO,CAACE,MAAM;IAAA;MAAAmB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,EACtDpB,OAAO,iBAAIR,OAAA;MAAAwB,QAAA,EAAMhB;IAAO;MAAAiB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC5B,CAAC;AAEX;AAACzB,EAAA,CA5CQF,WAAW;AAAAgC,EAAA,GAAXhC,WAAW;AA8CpB,eAAeA,WAAW;AAAC,IAAAgC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}